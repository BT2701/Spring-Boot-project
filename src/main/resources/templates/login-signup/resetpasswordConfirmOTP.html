<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Forgot Password</title>
        <!-- font-awesome  -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
        <!-- normalize reset css  -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css">
        <!-- bootstrap 5 -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
        <!-- style css  -->
        <link rel="stylesheet" href="/css/style.css">
        <style>

        </style>
    </head>
    <body>



        <section class="forgot-password-page">
            <!-- Sau khi user nhập email thì render ra form này -->
            <div class="confirm-email-form" id="confirm-email-form">
                <h2 class="text-center mb-4">Kiểm tra email</h2>
                <p>Nhập mã OTP được gửi đến email của bạn</p>
                <form action="/SendPassword" method="post" onsubmit="return validateForm()">
                    <div class="mb-3 d-flex justify-content-center">
                        <!--                        <input type="number" class="form-control" id="otpInput" placeholder="Enter your OTP" min="0" max="999999" oninput="this.value = Math.abs(parseInt(this.value)) || null;">-->
                        <input type="text" id="otpInput" placeholder="Nhập mã xác nhận(6 số)" class="form-control mb-1" style="margin-top: 0px;" maxlength="6" oninput="validateMaxacnhan(this)">
                        <div id="maxacnhanError" style="color: red; display: none;">Mã xác nhận phải có 6 số</div>
                    </div>
                    <!-- Thêm thẻ input ẩn để lưu trữ giá trị OTP -->
                    <input type="hidden" id="otp" name="otp" th:value="${otp}">
                    <button type="submit" class="btn btn-primary w-100">Verify OTP</button>
                    <input type="hidden" id="email" name="email" th:value="${email}">
                </form>
            </div>
        </section>

<script src="/js/homepage.js"></script>


        <!-- Bootstrap JS (optional) -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    </body>
    <script>
                    function validateForm() {
                        var otpinput = document.getElementById("otpInput").value;
                        var otp = document.getElementById("otp").value;

                        // Kiểm tra xem OTP có hợp lệ không (ví dụ: phải có độ dài là 6)
                        if (otp != otpinput) {
                            alert("Vui lòng nhập mã OTP hợp lệ.");
                            return false;
                        }

                        // Nếu dữ liệu hợp lệ, cho phép form được submit
                        return true;
                    }
                    function validateMaxacnhan(input) {
                        // Loại bỏ mọi ký tự không phải số
                        input.value = input.value.replace(/\D/g, '');

                        // Giới hạn chiều dài của chuỗi nhập vào là 6 ký tự
                        if (input.value.length > 6) {
                            input.value = input.value.slice(0, 6);
                        }

                        var confirmationCode = input.value;

                    }

    </script>
</html>
